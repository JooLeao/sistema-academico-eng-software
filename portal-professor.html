<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal do Professor - Sistema Acadêmico</title>
    <style>
        /* Estilos Globais e Reset */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            line-height: 1.6; 
            color: #333; 
            background: #f5f5f5;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Header - Adaptado do index.html */
        .header {
            background: #000000; 
            color: white; 
            position: sticky; 
            top: 0; 
            width: 100%;
            z-index: 1000; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
            transition: all 0.3s ease; 
            padding: 1rem 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .header-content {
            max-width: 1400px; 
            width: 100%;
            display: flex;
            justify-content: space-between; 
            align-items: center; 
            padding: 0 2rem;
        }
        .logo-header {
            display: flex; 
            align-items: center; 
            gap: 15px;
        }
        .logo-header img {
            width: 80px; 
            height: 80px; 
            object-fit: contain;
            transition: all 0.3s ease;
        }
        .logo-text h1 {
            font-size: 1.5rem; 
            font-weight: 600; 
            margin-bottom: 3px;
            color: white;
        }
        .logo-text p {
            font-size: 0.9rem; 
            color: #2F4F2F; 
            font-weight: 500;
        }
        
        /* Botões de Ação no Header (Logout) */
        .header-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        .btn-logout {
            padding: 8px 15px;
            background-color: #dc3545;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-weight: 500;
            transition: background-color 0.3s ease;
            cursor: pointer;
            border: none;
        }
        .btn-logout:hover {
            background-color: #c82333;
        }

        /* Layout Principal da Dashboard */
        .main-layout {
            max-width: 1400px; 
            margin: 2rem auto; 
            display: flex;
            gap: 2rem; 
            padding: 0 2rem;
            flex-grow: 1; 
        }

        /* Sidebar de Navegação */
        .sidebar {
            width: 250px; 
            background: white; 
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
            padding: 1.5rem;
            height: fit-content; 
            position: sticky; 
            top: 100px; 
            border: 1px solid #ddd;
        }
        .user-info {
            text-align: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #eee;
        }
        .user-info h3 {
            color: #2F4F2F;
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
        }
        .user-info p {
            color: #666;
            font-size: 0.9rem;
        }
        .sidebar-menu {
            list-style: none;
        }
        .sidebar-menu li {
            margin-bottom: 0.5rem;
        }
        .sidebar-menu a {
            color: #333; 
            text-decoration: none; 
            padding: 10px 15px;
            display: flex; 
            align-items: center;
            gap: 10px;
            border-radius: 5px;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        .sidebar-menu a:hover, .sidebar-menu a.active {
            background: #2F4F2F; 
            color: white;
        }
        .sidebar-menu a svg {
            fill: #333; 
            transition: fill 0.3s ease;
        }
        .sidebar-menu a:hover svg, .sidebar-menu a.active svg {
            fill: white; 
        }

        /* Conteúdo Principal da Dashboard */
        .content-area {
            flex: 1; 
            background: white; 
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
            overflow: hidden;
            border: 1px solid #ddd;
            padding: 2rem;
        }
        .content-section {
            display: none; 
        }
        .content-section.active {
            display: block;
        }
        .content-section h2 {
            color: #2F4F2F; 
            margin-bottom: 1.5rem; 
            font-size: 1.8em;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }

        /* Estilos para cards de informação */
        .info-cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }
        .info-card {
            background-color: #f8f8f8;
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        .info-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .info-card h3 {
            color: #000000;
            font-size: 1.3rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .info-card h3 svg {
            fill: #2F4F2F;
        }
        .info-card p {
            font-size: 0.95rem;
            color: #555;
        }
        .info-card .highlight {
            font-weight: bold;
            color: #2F4F2F;
        }
        .action-button {
            display: inline-block;
            margin-top: 1rem;
            padding: 10px 15px;
            background-color: #2F4F2F;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-weight: 500;
            transition: background-color 0.3s ease;
        }
        .action-button:hover {
            background-color: #1a361a;
        }

        /* Estilos para Tabela de Turmas */
        .turmas-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1.5rem;
        }
        .turmas-table th, .turmas-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        .turmas-table th {
            background-color: #2F4F2F;
            color: white;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.9em;
        }
        .turmas-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        .turmas-table tr:hover {
            background-color: #f0f0f0;
        }

        /* Estilos para Formulário de Cadastro de Aluno */
        .form-cadastro-aluno {
            margin-top: 1.5rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            padding: 20px;
            border: 1px solid #eee;
            border-radius: 8px;
            background-color: #fcfcfc;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        .form-cadastro-aluno label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }
        .form-cadastro-aluno input[type="text"],
        .form-cadastro-aluno input[type="email"],
        .form-cadastro-aluno input[type="password"],
        .form-cadastro-aluno input[type="number"] {
            width: calc(100% - 20px); 
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 1em;
        }
        .form-cadastro-aluno button {
            background-color: #28a745; /* Verde para cadastrar */
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s ease;
        }
        .form-cadastro-aluno button:hover {
            background-color: #218838;
        }
        #cadastroMessage {
            margin-top: 1rem;
            padding: 10px;
            border-radius: 5px;
            display: none;
            font-weight: bold;
        }
        #cadastroMessage.success { background-color: #d4edda; color: #155724; }
        #cadastroMessage.error { background-color: #f8d7da; color: #721c24; }
        
        /* Estilos para Calendário do Professor (simples) */
        .calendar-professor {
            margin-top: 1.5rem;
            text-align: center;
        }
        .calendar-professor p {
            color: #555;
        }
        /* Estilos para a lista de alunos (Boletim) */
        .aluno-list-boletim {
            list-style: none;
            padding: 0;
            margin-top: 1.5rem;
        }
        .aluno-list-boletim li {
            background-color: #f8f8f8;
            border: 1px solid #eee;
            border-radius: 8px;
            margin-bottom: 10px;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.2s ease;
        }
        .aluno-list-boletim li:hover {
            background-color: #f0f0f0;
        }
        .aluno-list-boletim li span {
            font-weight: 500;
            color: #333;
        }
        .aluno-list-boletim li button {
            padding: 8px 15px;
            background-color: #2F4F2F;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .aluno-list-boletim li button:hover {
            background-color: #1a361a;
        }
        /* Estilos para o Boletim do Aluno específico */
        .boletim-aluno-detalhes {
            margin-top: 1.5rem;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #fff;
        }
        .boletim-aluno-detalhes h3 {
            color: #2F4F2F;
            margin-bottom: 1rem;
        }
        .boletim-aluno-detalhes table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        .boletim-aluno-detalhes th,
        .boletim-aluno-detalhes td {
            border: 1px solid #eee;
            padding: 10px;
            text-align: left;
        }
        .boletim-aluno-detalhes th {
            background-color: #f0f0f0;
            font-weight: bold;
        }
        .boletim-aluno-detalhes .back-button {
            margin-top: 20px;
            background-color: #6c757d;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .boletim-aluno-detalhes .back-button:hover {
            background-color: #5a6268;
        }


        /* Footer - Adaptado do index.html */
        .footer {
            background: #000000; 
            color: white; 
            padding: 2rem 0;
            margin-top: 3rem; 
            width: 100%;
        }
        .footer-container {
            max-width: 100%; 
            margin: 0; 
            padding: 0 4rem;
            display: flex; 
            justify-content: space-between; 
            align-items: center;
            flex-wrap: wrap; 
            text-align: center;
        }
        .contact-info {
            flex: 1;
            min-width: 300px; 
            text-align: left;
        }
        .contact-info h3 {
            color: white; 
            margin-bottom: 1rem; 
            font-size: 1.1rem;
        }
        .contact-item {
            margin-bottom: 0.5rem; 
            color: #ccc; 
            font-size: 0.85rem;
        }
        .contact-item strong {
            color: white;
        }
        .contact-item a {
            color: #90EE90; 
            text-decoration: none;
        }
        .contact-item a:hover {
            text-decoration: underline;
        }
        .footer-right {
            display: flex; 
            align-items: center; 
            gap: 1.5rem;
            min-width: 200px;
            justify-content: flex-end; 
        }
        .footer-social {
            display: flex; 
            flex-direction: row; 
            gap: 10px;
        }
        .social-link-footer {
            width: 35px; 
            height: 35px; 
            border-radius: 6px;
            display: flex; 
            align-items: center; 
            justify-content: center;
            background: white; 
            transition: transform 0.3s ease;
            overflow: hidden; 
            border: 1px solid #000000;
        }
        .social-link-footer:hover {
            transform: translateY(-2px); 
            background: #f0f0f0;
        }
        .social-link-footer img {
            width: 20px; 
            height: 20px; 
            object-fit: contain;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .header-content, .main-layout {
                flex-direction: column;
                padding: 0 1rem;
            }
            .header-actions {
                width: 100%;
                justify-content: center;
                margin-top: 1rem;
            }
            .logo-header {
                flex-direction: column;
                text-align: center;
            }
            .sidebar {
                width: 100%;
                position: static;
                margin-bottom: 2rem;
                padding: 1rem;
            }
            .sidebar-menu a {
                justify-content: center;
            }
            .content-area {
                padding: 1rem;
            }
            .info-cards-grid {
                grid-template-columns: 1fr;
            }
            .turmas-table {
                font-size: 0.9em;
            }
            .turmas-table th, .turmas-table td {
                padding: 8px;
            }
            .footer-container {
                flex-direction: column;
                text-align: center;
                padding: 0 1rem;
            }
            .contact-info, .footer-right {
                text-align: center;
                justify-content: center;
            }
            .contact-info {
                min-width: unset;
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo-header">
                <img src="imagens/logo-engenharia.png" alt="Logo Engenharia Software">
                <div class="logo-text">
                    <h1>Sistema Acadêmico</h1>
                    <p>Engenharia de Software</p>
                </div>
            </div>
            <div class="header-actions">
                <span id="userName" style="color: #eee; font-weight: 500; margin-right: 1rem;">Olá, Professor!</span>
                <button class="btn-logout" id="logoutBtn">Sair</button>
            </div>
        </div>
    </header>

    <!-- Main Layout -->
    <div class="main-layout">
        <!-- Sidebar de Navegação -->
        <aside class="sidebar">
            <div class="user-info">
                <h3 id="sidebarUserName"></h3>
                <p id="sidebarUserEmail"></p>
                <p id="sidebarUserType"></p>
            </div>
            <ul class="sidebar-menu">
                <li><a href="#" data-section="inicio" class="active">
                    <svg viewBox="0 0 24 24" width="20" height="20"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path></svg>
                    Página Inicial
                </a></li>
                <li><a href="#" data-section="gerenciar-turmas">
                    <svg viewBox="0 0 24 24" width="20" height="20"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9c0-.41.47-.65.8-.43l6.54 4.5c.33.23.33.72 0 .95l-6.54 4.5c-.33.22-.8.08-.8-.34z"></path></svg>
                    Gerenciar Turmas
                </a></li>
                <li><a href="#" data-section="cadastrar-aluno">
                    <svg viewBox="0 0 24 24" width="20" height="20"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4zm6-11h-1V2c0-.55-.45-1-1-1s-1 .45-1 1v1H9V2c0-.55-.45-1-1-1s-1 .45-1 1v1H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 17H6V8h12v12z"></path></svg>
                    Cadastrar Aluno
                </a></li>
                <li><a href="#" data-section="publicar-anuncios">
                    <svg viewBox="0 0 24 24" width="20" height="20"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v1.5z"></path></svg>
                    Publicar Anúncios
                </a></li>
                <li><a href="#" data-section="boletim-alunos">
                    <svg viewBox="0 0 24 24" width="20" height="20"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"></path></svg>
                    Boletim Alunos
                </a></li>
                <li><a href="#" data-section="meu-calendario">
                    <svg viewBox="0 0 24 24" width="20" height="20"><path d="M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"></path></svg>
                    Meu Calendário
                </a></li>
            </ul>
        </aside>

        <!-- Conteúdo Principal da Dashboard -->
        <main class="content-area">
            <!-- Página Inicial (Default) -->
            <section id="inicio" class="content-section active">
                <h2>Página Inicial</h2>
                <div class="info-cards-grid">
                    <div class="info-card">
                        <h3><svg viewBox="0 0 24 24" width="24" height="24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path></svg> Meu Perfil</h3>
                        <p><strong>Nome:</strong> <span id="homeUserName"></span></p>
                        <p><strong>Email:</strong> <span id="homeUserEmail"></span></p>
                        <p><strong>Tipo:</strong> <span id="homeUserType"></span></p>
                        <p><strong>CPF:</strong> <span id="homeUserCPF">N/A</span></p>
                    </div>
                    <div class="info-card">
                        <h3><svg viewBox="0 0 24 24" width="24" height="24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"></path></svg> Minhas Turmas</h3>
                        <p>Visão geral das turmas que você leciona.</p>
                        <p>Ex: <span class="highlight">Eng. Software:</span> 2 turmas</p>
                        <p>Ex: <span class="highlight">Banco de Dados:</span> 1 turma</p>
                        <a href="#" data-section="gerenciar-turmas" class="action-button">Gerenciar Turmas</a>
                    </div>
                    <div class="info-card">
                        <h3><svg viewBox="0 0 24 24" width="24" height="24"><path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-2c0-1.66-1.34-3-3-3V9c0-1.1-.9-2-2-2h-2c-1.1 0-2 .9-2 2v1c-1.66 0-3 1.34-3 3s1.34 3 3 3v1h-1c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1h-1zM9 9h6v1H9V9z"></path></svg> Ações Rápidas</h3>
                        <p>Acesse rapidamente as ferramentas mais usadas.</p>
                        <a href="#" data-section="cadastrar-aluno" class="action-button">Cadastrar Aluno</a>
                        <a href="#" data-section="publicar-anuncios" class="action-button">Novo Anúncio</a>
                    </div>
                </div>
            </section>

            <!-- Seção de Gerenciar Turmas -->
            <section id="gerenciar-turmas" class="content-section">
                <h2>Gerenciar Turmas</h2>
                <table class="turmas-table">
                    <thead>
                        <tr>
                            <th>Código</th>
                            <th>Disciplina</th>
                            <th>Ano/Semestre</th>
                            <th>Horário</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>ES001-2025.1</td>
                            <td>Engenharia de Software</td>
                            <td>2025/1</td>
                            <td>SEG/QUA 14:00-16:00</td>
                            <td><button class="action-button" style="padding: 5px 10px; font-size: 0.8em;">Ver Alunos</button></td>
                        </tr>
                        <tr>
                            <td>BD001-2025.1</td>
                            <td>Banco de Dados I</td>
                            <td>2025/1</td>
                            <td>TER/QUI 10:00-12:00</td>
                            <td><button class="action-button" style="padding: 5px 10px; font-size: 0.8em;">Ver Alunos</button></td>
                        </tr>
                        <!-- Mais linhas podem ser adicionadas via JS ao buscar do backend -->
                    </tbody>
                </table>
            </section>

            <!-- Seção de Cadastrar Aluno -->
            <section id="cadastrar-aluno" class="content-section">
                <h2>Cadastrar Novo Aluno</h2>
                <form id="formCadastroAluno" class="form-cadastro-aluno">
                    <label for="alunoNomeCompleto">Nome Completo:</label>
                    <input type="text" id="alunoNomeCompleto" required>
                    
                    <label for="alunoEmail">Email:</label>
                    <input type="email" id="alunoEmail" required>
                    
                    <label for="alunoSenha">Senha:</label>
                    <input type="password" id="alunoSenha" required>

                    <label for="alunoMatricula">Matrícula (Opcional):</label>
                    <input type="text" id="alunoMatricula">

                    <label for="alunoCurso">Curso (Opcional):</label>
                    <input type="text" id="alunoCurso">

                    <label for="alunoPeriodo">Período (Opcional):</label>
                    <input type="number" id="alunoPeriodo">
                    
                    <button type="submit">Cadastrar Aluno</button>
                    <div id="cadastroMessage" style="display: none;"></div>
                </form>
            </section>

            <!-- Seção de Publicar Anúncios -->
            <section id="publicar-anuncios" class="content-section">
                <h2>Publicar Anúncios</h2>
                <form id="formPublicarAnuncio" class="form-cadastro-aluno">
                    <label for="tituloAnuncio">Título do Anúncio:</label>
                    <input type="text" id="tituloAnuncio" required>

                    <label for="conteudoAnuncio">Conteúdo:</label>
                    <textarea id="conteudoAnuncio" rows="8" style="width: calc(100% - 20px); padding: 10px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 5px; font-size: 1em;"></textarea>

                    <label for="categoriaAnuncio">Categoria (Opcional):</label>
                    <input type="text" id="categoriaAnuncio" placeholder="Ex: Geral, Evento, Importante">

                    <button type="submit">Publicar</button>
                    <div id="anuncioMessage" style="margin-top: 1rem; padding: 10px; border-radius: 5px; display: none;"></div>
                </form>
            </section>

            <!-- Seção Boletim Alunos -->
            <section id="boletim-alunos" class="content-section">
                <h2>Boletim dos Alunos</h2>
                <p>Selecione um aluno para visualizar seu boletim:</p>
                <ul id="alunosList" class="aluno-list-boletim">
                    <!-- Lista de alunos será carregada aqui via JS -->
                </ul>
                <div id="boletimAlunoDetalhes" class="boletim-aluno-detalhes" style="display: none;">
                    <button class="back-button" onclick="showAlunosList()">← Voltar à Lista de Alunos</button>
                    <h3 id="boletimAlunoNome"></h3>
                    <p>Matrícula: <span id="boletimAlunoMatricula"></span></p>
                    <table class="boletim-table">
                        <thead>
                            <tr>
                                <th>Disciplina</th>
                                <th>Nota 1</th>
                                <th>Nota 2</th>
                                <th>Média Final</th>
                                <th>Frequência (%)</th>
                                <th>Status</th>
                                <th>Ano/Semestre</th>
                            </tr>
                        </thead>
                        <tbody id="boletimTableBody">
                            <!-- Dados do boletim serão carregados aqui -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Seção Meu Calendário -->
            <section id="meu-calendario" class="content-section">
                <h2>Meu Calendário (Professor)</h2>
                <div class="calendar-professor">
                    <p>Aqui você pode visualizar seus horários de aula, reuniões e prazos importantes.</p>
                    <p>Funcionalidade de calendário interativo será implementada aqui.</p>
                </div>
            </section>
        </main>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="contact-info">
                <h3>Instituto Federal de Educação, Ciência e Tecnologia de Pernambuco</h3>
                <div class="contact-item">
                    <strong>Endereço:</strong> Av. Prof Luiz Freire, 500, Cidade Universitária - Recife-PE
                </div>
                <div class="contact-item">
                    <strong>CEP:</strong> 50740-545
                </div>
                <div class="contact-item">
                    <strong>Telefone:</strong> (81) 2125-1600
                </div>
                <div class="contact-item">
                    <strong>Email:</strong> contato@engenhariasoftware.edu.br
                </div>
                <div class="contact-item" style="margin-top: 1rem;">
                    <a href="#">Outros Contatos</a>
                </div>
            </div>
            <div class="footer-right">
                <div class="footer-social">
                    <a href="https://www.facebook.com/IFPECampusBeloJardim?locale=pt_BR" class="social-link-footer" target="_blank">
                        <img src="imagens/facebook-icon.png" alt="Facebook">
                    </a>
                    <a href="https://www.instagram.com/ifpecampusbelojardim/" class="social-link-footer" target="_blank">
                        <img src="imagens/instagram-icon.png" alt="Instagram">
                    </a>
                    <a href="https://www.youtube.com/@CanalIFPE" class="social-link-footer" target="_blank">
                        <img src="imagens/youtube-icon.png" alt="YouTube">
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const userNameDisplay = document.getElementById('userName');
            const sidebarUserName = document.getElementById('sidebarUserName');
            const sidebarUserEmail = document.getElementById('sidebarUserEmail');
            const sidebarUserType = document.getElementById('sidebarUserType');
            const homeUserName = document.getElementById('homeUserName');
            const homeUserEmail = document.getElementById('homeUserEmail');
            const homeUserType = document.getElementById('homeUserType');
            const homeUserCPF = document.getElementById('homeUserCPF');
            const logoutBtn = document.getElementById('logoutBtn');
            const sidebarLinks = document.querySelectorAll('.sidebar-menu a');
            const contentSections = document.querySelectorAll('.content-section');
            const alunosList = document.getElementById('alunosList');
            const boletimAlunoDetalhes = document.getElementById('boletimAlunoDetalhes');
            const boletimAlunoNome = document.getElementById('boletimAlunoNome');
            const boletimAlunoMatricula = document.getElementById('boletimAlunoMatricula');
            const boletimTableBody = document.getElementById('boletimTableBody');

            // --- Verificação de Autenticação ---
            const authToken = localStorage.getItem('authToken');
            const userType = localStorage.getItem('userType');
            let loggedInUserId = null; // Para armazenar o ID do usuário logado

            if (!authToken || userType !== 'professor') {
                alert('Acesso negado. Por favor, faça login como professor.');
                window.location.href = '/login-professor.html';
                return;
            }

            // Tentar decodificar o token JWT para pegar informações (sem validação de token completa aqui)
            try {
                const payload = JSON.parse(atob(authToken.split('.')[1]));
                loggedInUserId = payload.id; // Pega o ID do usuário logado
                
                // --- Carregar Dados do Professor ---
                const response = await fetch(`http://localhost:3000/usuarios/${loggedInUserId}`, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });

                if (response.ok) {
                    const apiUserData = await response.json();
                    const userData = { // Criar objeto userData para consistência
                        nome_completo: apiUserData.nome_completo || 'Professor Exemplo',
                        email: apiUserData.email || 'professor@exemplo.com',
                        tipo: apiUserData.tipo || 'professor',
                        cpf: apiUserData.professor_info ? apiUserData.professor_info.cpf : 'N/A'
                    };

                    userNameDisplay.textContent = `Olá, Prof. ${userData.nome_completo.split(' ')[0]}!`;
                    sidebarUserName.textContent = userData.nome_completo;
                    sidebarUserEmail.textContent = userData.email;
                    sidebarUserType.textContent = userData.tipo.charAt(0).toUpperCase() + userData.tipo.slice(1);
                    homeUserName.textContent = userData.nome_completo;
                    homeUserEmail.textContent = userData.email;
                    homeUserType.textContent = userData.tipo.charAt(0).toUpperCase() + userData.tipo.slice(1);
                    homeUserCPF.textContent = userData.cpf;
                } else {
                    console.error('Falha ao buscar dados do professor da API:', response.status);
                    alert('Sua sessão expirou ou é inválida. Faça login novamente.');
                    localStorage.clear();
                    window.location.href = '/login-professor.html';
                    return;
                }
            } catch (e) {
                console.error('Erro ao decodificar token ou buscar dados do professor:', e);
                alert('Sua sessão é inválida. Faça login novamente.');
                localStorage.clear();
                window.location.href = '/login-professor.html';
                return;
            }

            // --- Funcionalidade de Logout ---
            logoutBtn.addEventListener('click', () => {
                localStorage.removeItem('authToken');
                localStorage.removeItem('userType');
                alert('Você foi desconectado.');
                window.location.href = '/index.html';
            });

            // --- Navegação entre Seções ---
            sidebarLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetSectionId = link.getAttribute('data-section');

                    sidebarLinks.forEach(item => item.classList.remove('active'));
                    link.classList.add('active');

                    contentSections.forEach(section => section.classList.remove('active'));
                    document.getElementById(targetSectionId).classList.add('active');

                    // Ações específicas ao mudar de seção
                    if (targetSectionId === 'boletim-alunos') {
                        loadAlunosForBoletim();
                        boletimAlunoDetalhes.style.display = 'none'; // Esconde detalhes do boletim ao voltar para lista
                        alunosList.style.display = 'block'; // Mostra a lista de alunos
                    }
                });
            });

            // --- Funcionalidade de Cadastro de Aluno ---
            const formCadastroAluno = document.getElementById('formCadastroAluno');
            const cadastroMessage = document.getElementById('cadastroMessage');

            formCadastroAluno.addEventListener('submit', async (e) => {
                e.preventDefault();
                cadastroMessage.style.display = 'none';
                cadastroMessage.className = '';

                const nome_completo = document.getElementById('alunoNomeCompleto').value;
                const email = document.getElementById('alunoEmail').value;
                const senha = document.getElementById('alunoSenha').value;
                const matricula = document.getElementById('alunoMatricula').value;
                const curso = document.getElementById('alunoCurso').value;
                const periodo = document.getElementById('alunoPeriodo').value;

                try {
                    const response = await fetch('http://localhost:3000/usuarios', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${authToken}` 
                        },
                        body: JSON.stringify({
                            nome_completo,
                            email,
                            senha,
                            tipo: 'aluno', 
                            matricula: matricula || undefined,
                            curso: curso || undefined,
                            periodo: periodo ? parseInt(periodo) : undefined
                        })
                    });

                    const data = await response.json();
                    if (response.ok) {
                        cadastroMessage.textContent = `Aluno ${data.nome_completo} (${data.email}) cadastrado com sucesso!`;
                        cadastroMessage.classList.add('success');
                        formCadastroAluno.reset();
                    } else {
                        cadastroMessage.textContent = data.error || 'Erro ao cadastrar aluno.';
                        cadastroMessage.classList.add('error');
                    }
                } catch (err) {
                    console.error('Erro na requisição de cadastro de aluno:', err);
                    cadastroMessage.textContent = 'Não foi possível conectar ao servidor para cadastrar o aluno.';
                    cadastroMessage.classList.add('error');
                }
                cadastroMessage.style.display = 'block';
            });

            // --- Funcionalidade de Publicar Anúncios (Notícias) ---
            const formPublicarAnuncio = document.getElementById('formPublicarAnuncio');
            const anuncioMessage = document.getElementById('anuncioMessage');

            formPublicarAnuncio.addEventListener('submit', async (e) => {
                e.preventDefault();
                anuncioMessage.style.display = 'none';
                anuncioMessage.className = '';
                
                const titulo = document.getElementById('tituloAnuncio').value;
                const conteudo = document.getElementById('conteudoAnuncio').value;
                const categoria = document.getElementById('categoriaAnuncio').value;

                if (!titulo || !conteudo) {
                    anuncioMessage.textContent = 'Preencha o título e o conteúdo do anúncio.';
                    anuncioMessage.classList.add('error');
                    anuncioMessage.style.display = 'block';
                    return;
                }

                try {
                    const response = await fetch('http://localhost:3000/noticias', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${authToken}` // Token do professor
                        },
                        body: JSON.stringify({ titulo, conteudo, categoria })
                    });

                    const data = await response.json();
                    if (response.ok) {
                        anuncioMessage.textContent = `Notícia "${data.titulo}" publicada com sucesso!`;
                        anuncioMessage.classList.add('success');
                        formPublicarAnuncio.reset();
                    } else {
                        anuncioMessage.textContent = data.error || 'Erro ao publicar notícia.';
                        anuncioMessage.classList.add('error');
                    }
                } catch (err) {
                    console.error('Erro na requisição de publicação de notícia:', err);
                    anuncioMessage.textContent = 'Não foi possível conectar ao servidor para publicar a notícia.';
                    anuncioMessage.classList.add('error');
                }
                anuncioMessage.style.display = 'block';
            });

            // --- Funcionalidade de Boletim de Alunos ---
            // Função para carregar a lista de todos os alunos
            async function loadAlunosForBoletim() {
                alunosList.innerHTML = '<li>Carregando alunos...</li>';
                try {
                    // Rota para buscar todos os usuários que são alunos
                    const response = await fetch('http://localhost:3000/alunos', { // Criaremos esta rota no backend
                        headers: { 'Authorization': `Bearer ${authToken}` }
                    });

                    if (response.ok) {
                        const alunos = await response.json();
                        alunosList.innerHTML = ''; // Limpa a mensagem de carregamento
                        if (alunos.length > 0) {
                            alunos.forEach(aluno => {
                                const li = document.createElement('li');
                                li.innerHTML = `
                                    <span>${aluno.nome_completo} (${aluno.matricula || aluno.email})</span>
                                    <button data-aluno-id="${aluno.aluno_id || aluno.id}">Ver Boletim</button>
                                `;
                                alunosList.appendChild(li);
                            });
                            // Adicionar event listeners aos botões "Ver Boletim"
                            alunosList.querySelectorAll('button').forEach(button => {
                                button.addEventListener('click', (e) => {
                                    const alunoId = e.target.getAttribute('data-aluno-id');
                                    viewBoletimAluno(alunoId);
                                });
                            });
                        } else {
                            alunosList.innerHTML = '<li>Nenhum aluno encontrado.</li>';
                        }
                    } else {
                        console.error('Falha ao carregar lista de alunos:', response.status);
                        alunosList.innerHTML = '<li>Erro ao carregar alunos.</li>';
                    }
                } catch (e) {
                    console.error('Erro ao buscar lista de alunos:', e);
                    alunosList.innerHTML = '<li>Erro de conexão ao carregar alunos.</li>';
                }
            }

            // Função para visualizar o boletim de um aluno específico
            async function viewBoletimAluno(alunoId) {
                alunosList.style.display = 'none'; // Esconde a lista de alunos
                boletimAlunoDetalhes.style.display = 'block'; // Mostra a seção de detalhes
                boletimTableBody.innerHTML = '<tr><td colspan="7">Carregando boletim...</td></tr>';

                try {
                    const response = await fetch(`http://localhost:3000/boletins/aluno/${alunoId}`, {
                        headers: { 'Authorization': `Bearer ${authToken}` }
                    });

                    if (response.ok) {
                        const data = await response.json();
                        boletimAlunoNome.textContent = data.aluno.nome_completo;
                        boletimAlunoMatricula.textContent = data.aluno.matricula || 'N/A';
                        boletimTableBody.innerHTML = ''; // Limpa a mensagem de carregamento

                        if (data.boletim.length > 0) {
                            data.boletim.forEach(item => {
                                const row = document.createElement('tr');
                                const statusClass = item.status === 'aprovado' ? 'status-aprovado' : 
                                                    (item.status === 'reprovado' ? 'status-reprovado' : 'status-cursando');
                                row.innerHTML = `
                                    <td>${item.disciplina_nome}</td>
                                    <td>${item.nota1 !== null ? item.nota1 : 'N/A'}</td>
                                    <td>${item.nota2 !== null ? item.nota2 : 'N/A'}</td>
                                    <td>${item.media_final !== null ? item.media_final : 'N/A'}</td>
                                    <td>${item.frequencia !== null ? item.frequencia : 'N/A'}</td>
                                    <td class="${statusClass}">${item.status.charAt(0).toUpperCase() + item.status.slice(1)}</td>
                                    <td>${item.ano}/${item.semestre}</td>
                                `;
                                boletimTableBody.appendChild(row);
                            });
                        } else {
                            boletimTableBody.innerHTML = '<tr><td colspan="7">Nenhuma matrícula encontrada para este aluno.</td></tr>';
                        }
                    } else {
                        console.error('Falha ao carregar boletim:', response.status);
                        boletimTableBody.innerHTML = '<tr><td colspan="7">Erro ao carregar boletim.</td></tr>';
                    }
                } catch (e) {
                    console.error('Erro ao buscar boletim:', e);
                    boletimTableBody.innerHTML = '<tr><td colspan="7">Erro de conexão ao buscar boletim.</td></tr>';
                }
            }

            function showAlunosList() {
                boletimAlunoDetalhes.style.display = 'none';
                alunosList.style.display = 'block';
                // Recarrega a lista de alunos para garantir que esteja atualizada
                loadAlunosForBoletim(); 
            }
        });
    </script>
</body>
</html>
